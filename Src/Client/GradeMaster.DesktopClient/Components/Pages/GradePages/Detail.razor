@page "/grades/{Id:int}"

<TopPageHeader Style="font-size: 28px; top: 10px">Detail Grade</TopPageHeader>

<div class="border-top" style="width: 100%; max-width: 50%; margin-top: 15px"></div>

<div class="container">
    <div class="border-top generic-devider-line" style="margin-top: -1px"></div>
    <div class="col-12 col-md-12 py-3" style="max-width: 1200px;" >
        <h2 style="font-size: 34px;">
            @if (Grade.Value < 4)
            {
                <Badge Color="BadgeColor.Danger" Style="font-weight: initial;">
                    <b class="enabled-text-selection">@Grade.Value.ToString("0.##")</b>
                </Badge>
            }
            else
            {
                <b class="enabled-text-selection">@Grade.Value.ToString("0.##")</b>
            }
        </h2>
        <CardSubTitle Class="enabled-text-selection" Style="margin-top: 6px;">Weight: @Grade.Weight.Name / @Grade.Weight.Value.ToString("0.0##")</CardSubTitle>
    </div>

    <div class="py-2">
        <Card Style="max-width: 1050px">
            <CardBody Id="description-area" Style="@(DescriptionAreaDynamicHeight)">
                <CardText Id="description-text" Class="enabled-text-selection" Style="white-space: pre-wrap; margin-bottom: 0;">
                    <b class="enabled-text-selection">Description:</b> <br style="user-select: text;"/> @UIUtils.FallbackIfEmpty(Grade.Description, "-")
                </CardText>
                <div class="description-bottom-cover"></div>
                @if (IsTruncated)
                {
                    <Button Type="ButtonType.Button" Color="ButtonColor.Link" Class="show-more-less-btn fw-bolder" @onclick="ToggleDescription">...@ButtonText</Button>
                }
            </CardBody>
        </Card>
    </div>
    <div class="py-3" style="margin-bottom: 50px">
        <Card Style="max-width: 1050px">
            <CardBody>
                <div class="row row-cols-1 row-cols-sm-1 row-cols-md-1 row-cols-lg-2">
                    @* <div class="col mb-3">
                        <CardText Class="border-bottom" Style="padding-bottom: 20px; margin-bottom: 6px;">
                            <strong>Subject Average: </strong>
                            @if (_subjectAverage < 4 && _subjectAverage != 0)
                            {
                                <Badge Color="BadgeColor.Danger" IndicatorType="BadgeIndicatorType.RoundedPill">
                                    @(_subjectAverage == 0 ? "N/A" : _subjectAverage.ToString("0.##"))
                                </Badge>
                            }
                            else
                            {
                                @(_subjectAverage == 0 ? "N/A" : _subjectAverage.ToString("0.##"))
                            }
                        </CardText>
                    </div> *@
                    <div class="col mb-3">
                        <CardText Class="border-bottom enabled-text-selection" Style="padding-bottom: 17px; margin-bottom: 6px;">
                            <b class="enabled-text-selection">Education:</b> 
                            <Button @onclick="GoToEducation" class="btn-translucient-v2 border-0 enabled-text-selection" style="padding: 3px; padding-left: 6px; padding-right: 6px; font-size: initial; margin-top: -4px; margin-left: -5px;">@Grade.Subject.Education.Name <Icon Name="IconName.ArrowUpRightCircle" /></Button>
                            <CompletionStateBadge Completed="Grade.Subject.Education.Completed" MarginBottom="2" />
                        </CardText>
                    </div>
                    <div class="col mb-3">
                        <CardText Class="border-bottom enabled-text-selection" Style="padding-bottom: 20px; margin-bottom: 6px;">
                            <b class="enabled-text-selection">Institution:</b> @UIUtils.FallbackIfEmpty(Grade.Subject.Education.Institution, "-")
                        </CardText>
                    </div>
                    <div class="col mb-3">
                        <CardText Class="border-bottom enabled-text-selection" Style="padding-bottom: 17px; margin-bottom: 6px;">
                            <b class="enabled-text-selection">Subject:</b> 
                            <Button @onclick="GoToSubject" class="btn-translucient-v2 border-0 enabled-text-selection" style="padding: 3px; padding-left: 6px; padding-right: 6px; font-size: initial; margin-top: -4px; margin-left: -5px;"> @Grade.Subject.Name - @Grade.Subject.Semester <Icon Name="IconName.ArrowUpRightCircle" /></Button>
                            <CompletionStateBadge Completed="Grade.Subject.Completed" MarginBottom="2" />
                        </CardText>
                    </div>
                    <div class="col mb-3">
                        <CardText Class="border-bottom enabled-text-selection" Style="padding-bottom: 20px; margin-bottom: 6px;">
                            <b class="enabled-text-selection">Date:</b> @Grade.Date.ToShortDateString()
                        </CardText>
                    </div>
                </div>
            </CardBody>
        </Card>
    </div>

    <div class="border-top generic-devider-line" style="margin-top: 15px"></div>

    <div class="d-flex justify-content-between my-3" style="max-width: 1050px">
        <Button Color="ButtonColor.Primary" @onclick="GoBack" Size="ButtonSize.Medium">
            <Icon Name="IconName.ArrowLeft" /> Back
        </Button>
        <Button Color="ButtonColor.Success" @onclick="EditGrade" Size="ButtonSize.Medium">
            Edit <Icon Name="IconName.PencilSquare" />
        </Button>
    </div>
</div>

<script>
    window.scrollTo({ top: 0, behavior: 'auto' });
</script>

@code {

}
